!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.selectify=t():e.selectify=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=331)}({330:function(e,t,n){"use strict";var i,o=(i=n(91))&&i.__esModule?i:{default:i};n(336);var r=document.getElementById("example-select");new o.default(r,{onSelect:function(e){var t=e.selectionContent,n=e.selectionValue,i=e.selectionIndex;console.log("Selection made. Content: "+t+"; Value: "+n+"; Index: "+i)}})},331:function(e,t,n){e.exports=n(330)},336:function(e,t){},91:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(t,n){var i=n.onSelect,o=n.setOptionContentToTitle,s=void 0!==o&&o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.call(this),this.state={currentIndex:null,isOpen:!1,selectionValue:null},this.data={callbacks:{onSelect:i},settings:{setOptionContentToTitle:s},ui:{elements:{nativeSelect:t,selectify:null,trigger:null,options:null},cssClasses:{selectify:"selectify",trigger:"selectify-trigger",options:"selectify-options",option:"selectify-option"}}},this._init()}return i(e,[{key:"_init",value:function(){this._buildComponentMarkup(),this._setupEvents()}},{key:"_copyAttributes",value:function(e,t){Array.prototype.forEach.call(e.attributes,function(e){var n="value"===e.name?"data-value":e.name,i=e.value;t.setAttribute(n,i)})}},{key:"_replaceNativeSelectWithCustomSelect",value:function(e,t){e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}}]),e}(),r=function(){var e=this;this._buildComponentMarkup=function(){var t=e.data.ui,n=t.cssClasses,i=t.elements,o=e.data.settings.setOptionContentToTitle,r=i.nativeSelect.getAttribute("tabindex");i.selectify=document.createElement("div"),i.selectify.classList.add(n.selectify),e._copyAttributes(i.nativeSelect,i.selectify),i.trigger=document.createElement("div"),i.trigger.classList.add(n.trigger),i.trigger.setAttribute("tabindex",r),i.trigger.setAttribute("role","Selected value"),i.selectify.appendChild(i.trigger),i.options=document.createElement("div"),i.options.classList.add(n.options),i.selectify.appendChild(i.options);var s=i.nativeSelect.children;Array.prototype.forEach.call(s,function(t){var s=document.createElement("div");s.innerHTML=t.innerHTML,e._copyAttributes(t,s),s.classList.add(n.option),o&&s.setAttribute("title",s.innerHTML),s.setAttribute("tabindex",r),i.options.appendChild(s)}),i.trigger.innerHTML=i.options.children[0].innerHTML,e._replaceNativeSelectWithCustomSelect(i.nativeSelect,i.selectify)},this._setupEvents=function(){var t=e.data.ui.elements;t.trigger.addEventListener("click",e.toggleDropdown),t.selectify.addEventListener("keydown",e._handleKeyDownTrigger),t.options.addEventListener("click",e._handleSelectOption)},this._handleSelectOption=function(t){var n=t.target,i=e.data,o=i.callbacks.onSelect,r=i.ui,s=r.cssClasses,l=r.elements;if(n.classList.contains(s.option)){var a=n.innerHTML,c=n.dataset.value,u=Array.prototype.indexOf.call(n.parentNode.childNodes,n);l.trigger.innerHTML=a,e.state.selectionValue=c,e.state.currentIndex=u,l.trigger.setAttribute("title",a),e.closeDropdown(),o&&o({selectionContent:a,selectionValue:c,selectionIndex:u})}},this._handleKeyDownTrigger=function(t){var n=e.data.ui.elements.options.childNodes.length,i=e.state,o=i.isOpen,r=i.currentIndex,s=(t=t||window.event).keyCode;if(o)if(40===s||38===s)40===s?null===e.state.currentIndex?e.state.currentIndex=0:e.state.currentIndex<n-1&&e.state.currentIndex++:e.state.currentIndex>0&&e.state.currentIndex--,e._setIndexHover(r);else if(13===s){var l=e.state.currentIndex;null!==l?e.setSelectedIndex(l):e.closeDropdown()}else 27===s&&(e.closeDropdown(),t.stopPropagation());else 13===s&&(e.toggleDropdown(),e._setIndexHover())},this._setIndexHover=function(t){var n=e.data.ui.elements.options,i=n.childNodes,o=i.length;s(t)&&i[t].classList.remove("hover");var r=e.state.currentIndex;function s(e){return null!==e&&e>=0&&e<o}s(r)&&(i[r].focus(),null===t&&window.setTimeout(function(){n.scrollTop=0},50))},this.toggleDropdown=function(){var t=e.data.ui.elements;e.state.isOpen=!e.state.isOpen,t.selectify.classList.toggle("open")},this.closeDropdown=function(){var t=e.data.ui.elements;e.state.isOpen=!1,t.selectify.classList.remove("open"),t.trigger.focus()},this.getSelectionValue=function(){return e.state.selectionValue},this.setSelectedIndex=function(t){var n=e.data.ui.elements;e._handleSelectOption({target:n.options.children[t]})}};t.default=o}})});